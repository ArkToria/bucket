{
    "version": "0.1.0",
    "description": "A GUI Client for V2Ray",
    "homepage": "https://github.com/ArkToria/ACross",
    "license": "GPL-3.0-only",
    "suggest": {
        "v2ray": "v2ray",
        "vcredist": "extras/vcredist2019"
    },
    "architecture": {
        "64bit": {
            "url": "https://github.com/ArkToria/ACross/releases/download/v0.1.0/msvc-x86_64-across-0.1.0.zip",
            "hash": "84696f5fc27bbf71ec4bcf2632c0e61fbd129c8e805684106b0e64410904ebe7"
        }
    },
    "pre_install": [
        "if (-not (Test-Path \"$persist_dir\\config\\across.json\")) {",
        "    ensure \"$dir\\config\" | Out-Null",
        "    $config = @{",
        "        'data_dir' = \"$persist_dir\\config\"",
        "        'interface' = @{",
        "             'theme' = @{",
        "                  'include_dir' = \"$persist_dir\\config\\themes\"",
        "             }",
        "        }",
        "        'database' = @{",
        "            'db_path' = \"$persist_dir\\config\\across.db\"",
        "        }",
        "    }",
        "    $v2ray_dir = appdir 'v2ray' $global",
        "    if (Test-Path $v2ray_dir) {",
        "        $current = $v2ray_dir | Join-Path -ChildPath 'current'",
        "        $config.Add('core', @{",
        "                 'core_path' = \"$current\\v2ray.exe\"",
        "                 'assets_path' = \"$current\"",
        "        })",
        "    }",
        "    $config | ConvertTo-Json -Depth 20 | Out-File \"$dir\\config\\across.json\"",
        "}"
    ],
    "env_set": {
        "ACROSS_CONFIG_PATH": "$persist_dir\\config\\across.json",
        "ACROSS_DATA_DIR": "$persist_dir\\config"
    },
    "bin": "across.exe",
    "shortcuts": [
        [
            "across.exe",
            "ACross"
        ]
    ],
    "persist": "config"
}